<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="4y-ZzdSRcW1Vg9m1bWvrtu2Ev9sTOcdomkcXN-8cnL8" />
    <title>TripPlanner</title>
    
    <!-- Global Icon (Favicon) -->
    <link rel="icon" type="image/svg+xml" href="/images/favicon.png">
    <link rel="alternate icon" href="/images/favicon.png">
    <link rel="apple-touch-icon" href="/images/favicon.png">
    
    <!-- Tailwind CSS with Dark Mode Configuration -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out'
                    }
                }
            }
        }
    </script>
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    
    <!-- Add Animation Styles -->
    <style>
        /* Performance-optimized animations */
        
        /* Scroll-triggered fade animations */
        .fade-up {
            opacity: 0;
            transform: translate3d(0, 30px, 0);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .fade-up.animate {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }
        
        .fade-in-left {
            opacity: 0;
            transform: translate3d(-30px, 0, 0);
            transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .fade-in-right {
            opacity: 0;
            transform: translate3d(30px, 0, 0);
            transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .fade-in-left.animate,
        .fade-in-right.animate {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }
        
        /* Stagger animation for cards */
        .stagger-child {
            opacity: 0;
            transform: translate3d(0, 20px, 0);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transition-delay: var(--delay, 0ms);
        }
        
        .stagger-child.animate {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }
        
        /* Enhanced card hover effects */
        .destination-card {
            transform: translate3d(0, 0, 0);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .destination-card:hover {
            transform: translate3d(0, -6px, 0);
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.15);
        }
        
        .destination-card img {
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
        }
        
        .destination-card:hover img {
            transform: scale3d(1.05, 1.05, 1);
        }
        
        /* Button animations */
        .btn-animate {
            transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-animate:hover {
            transform: translate3d(0, -2px, 0);
        }
        
        .btn-animate:active {
            transform: translate3d(0, 0, 0);
        }
        
        /* Scale animation for icons */
        .icon-hover {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .icon-hover:hover {
            transform: scale3d(1.1, 1.1, 1);
        }
        
        /* Pulse animation for special elements */
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(6, 182, 212, 0.3); }
            50% { box-shadow: 0 0 30px rgba(6, 182, 212, 0.6); }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
        
        /* Mobile optimization */
        @media (max-width: 768px) {
            .destination-card img {
                transition: none;
            }
            
            .destination-card:hover img {
                transform: none;
            }
            
            .fade-up, .fade-in-left, .fade-in-right {
                transition-duration: 0.4s;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>

<body class="flex flex-col min-h-screen bg-white dark:bg-slate-900 font-sans text-gray-900 transition-colors duration-300">
    
    <!-- Navigation -->
    <nav class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-gray-100 dark:border-slate-700 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-0 sm:px-6 lg:px-0">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <a class="flex items-center text-gray-900 dark:text-white font-bold text-xl" href="/">
                        <i class="bi bi-globe-asia-australia mr-2 text-cyan-600 dark:text-cyan-400"></i>
                        Sri Lanka Trip Planner
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Theme Toggle Button -->
                    <button id="theme-toggle" class="p-2 rounded-full text-gray-500 dark:text-slate-400 hover:bg-gray-100 dark:hover:bg-slate-800 focus:outline-none transition-colors">
                        <i id="theme-icon" class="bi bi-sun-fill text-yellow-400"></i>
                    </button>

                    <a href="/generate-trip" class="bg-cyan-600 text-white hover:bg-cyan-700 px-4 py-2 rounded-full text-sm font-bold transition shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                        New Trip
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <main class="container mx-auto bg-white dark:bg-slate-900 mt-8 flex-grow px-4 sm:px-6 lg:px-8">
        <%- body %>
    </main>
    <!-- Footer -->
    <footer class="mt-auto py-6 bg-cyan-700 text-white dark:bg-slate-900 dark:border-t dark:border-slate-800 transition-colors duration-300">
        <div class="container mx-auto text-center px-4">
            <span class="text-sm">Â© 2025 Sri Lanka Trip Planner. All rights reserved.</span>
        </div>
    </footer>
    <script src="/js/validateForm.js"></script>

    <!-- Script to handle theme toggling -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        
        // Check for saved theme preference or default to light
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
            applyDarkTheme();
        } else {
            applyLightTheme();
        }
        
        themeToggleBtn.addEventListener('click', () => {
            if (document.documentElement.classList.contains('dark')) {
                applyLightTheme();
                localStorage.setItem('theme', 'light');
            } else {
                applyDarkTheme();
                localStorage.setItem('theme', 'dark');
            }
        });
        
        function applyDarkTheme() {
            document.documentElement.classList.add('dark');
            themeIcon.className = 'bi bi-moon-stars-fill text-slate-300';
        }
        
        function applyLightTheme() {
            document.documentElement.classList.remove('dark');
            themeIcon.className = 'bi bi-sun-fill text-yellow-400';
        }
    });
    </script>

    <!-- Optimized Intersection Observer for scroll animations -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
        // Performance-optimized observer
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -80px 0px'
        };

        let observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const target = entry.target;
                    
                    // Add animation class
                    target.classList.add('animate');
                    
                    // Handle stagger animations
                    if (target.classList.contains('stagger-parent')) {
                        const children = target.querySelectorAll('.stagger-child');
                        children.forEach((child, index) => {
                            child.style.setProperty('--delay', `${index * 100}ms`);
                            setTimeout(() => {
                                child.classList.add('animate');
                            }, index * 80);
                        });
                    }
                    
                    // Stop observing once animated
                    observer.unobserve(target);
                }
            });
        }, observerOptions);

        // Observe elements with animation classes
        function observeElements() {
            const elements = document.querySelectorAll('.fade-up, .fade-in-left, .fade-in-right, .stagger-parent');
            elements.forEach(el => {
                if (!el.classList.contains('animate')) {
                    observer.observe(el);
                }
            });
        }

        // Initial observation
        observeElements();
    });

        // Smooth scroll enhancement
        document.addEventListener('click', function(e) {
        const link = e.target.closest('a[href^="#"]');
        if (link) {
            e.preventDefault();
            const target = document.querySelector(link.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }
    });
    </script>
</body>
</html>